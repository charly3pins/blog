<!DOCTYPE html>
<html lang="es" data-theme="light">
	
	<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="referrer" content="no-referrer">
  <meta name="description" content="Director de Ingenieria">

  <title>Aprende a utilizar el paquete embed a Go construyendo una página web fácilmente | Charly3Pins</title>


  <meta property="og:title" content="Aprende a utilizar el paquete embed a Go construyendo una página web fácilmente - charly3pins" />

  <meta property="og:type" content="website">
  <meta property="og:description" content="¿Para qué sirve el nuevo paquete embed añadido en Go 1.16 y cómo usarlo para nuestro beneficio?">
  <meta property="og:url" content="https://charly3pins.dev/es/blog/aprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%C3%A1gina-web-f%C3%A1cilmente/">
  <meta property="og:site_name" content="charly3pins.dev">
  
  <meta property="og:image" content="https://charly3pins.dev/images/gopher-hiking.svg">

  <meta name="twitter:card" content="summary_large_image">

  <meta name="twitter:title" content="Aprende a utilizar el paquete embed a Go construyendo una página web …" />


  <meta name="twitter:description" content="¿Para qué sirve el nuevo paquete embed añadido en Go 1.16 y cómo usarlo para nuestro beneficio?">


  <meta name="twitter:image" content="https://charly3pins.dev/images/gopher-hiking.svg">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-126216319-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  <link rel="stylesheet" href="https://charly3pins.dev/css/main.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/syntax.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/social_share.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

	<body>
		<div class="navbar-container">
    <nav class="navbar-navigation">
        
        <a href="/es/">Inicio</a>
        
        <a href="/es/blog/">Blog</a>
        
        <a href="/es/code/">Código</a>
        
        <a href="/es/about/">Quién</a>
        
        
        <ul class="lang-selector">
            <li>
                <a>Castellano</a> <i class="fa fa-angle-down" aria-hidden="true"></i>
                <ul>
                
                    <a href="https://charly3pins.dev/blog/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily/">Inglés</a>
                
                    <a href="https://charly3pins.dev/ca/blog/apr%C3%A8n-a-fer-servir-el-paquet-embed-a-go-construint-una-p%C3%A0gina-web-f%C3%A0cilment/">Catalán</a>
                
                </ul>
            </li>
        </ul>
        
        <button class="theme-switch-wrapper">
            <img id="theme-switcher" class="theme-switcher" src="https://sunilsandhu.com/assets/icons/sun-moon.png" alt="toggle dark mode">
        </button>
    </nav>
</div>
		
		<div class="layout-container">

			<section class="blog-container">
				
				<h4 class="post-title">Aprende a utilizar el paquete embed a Go construyendo una página web fácilmente</h4>
				<h2 class="post-description">¿Para qué sirve el nuevo paquete embed añadido en Go 1.16 y cómo usarlo para nuestro beneficio?</h2>

				<div class="post-metadata">
					<div class="post-tags">
						
						<a class="tag" href="https://charly3pins.dev/tags/go/">#go</a>
						
					</div>
					<span class="post-date">
						16/08/2021 · 6 min lectura
					</span>
				</div>

				<ul class="icons">
    
    <li>
        
        <a href="//twitter.com/share?url=https%3a%2f%2fcharly3pins.dev%2fes%2fblog%2faprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%25C3%25A1gina-web-f%25C3%25A1cilmente%2f&amp;text=Aprende%20a%20utilizar%20el%20paquete%20embed%20a%20Go%20construyendo%20una%20p%c3%a1gina%20web%20f%c3%a1cilmente&amp;via=charly3pins&amp;hashtags=go" target="_blank" class="share-btn twitter">
            <i class="fa fa-twitter"></i>
        </a>
    </li>

    
    <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcharly3pins.dev%2fes%2fblog%2faprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%25C3%25A1gina-web-f%25C3%25A1cilmente%2f" target="_blank" class="share-btn facebook">
            <i class="fa fa-facebook"></i>
        </a>
    </li>

    
    <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fcharly3pins.dev%2fes%2fblog%2faprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%25C3%25A1gina-web-f%25C3%25A1cilmente%2f&amp;title=Aprende%20a%20utilizar%20el%20paquete%20embed%20a%20Go%20construyendo%20una%20p%c3%a1gina%20web%20f%c3%a1cilmente" target="_blank" class="share-btn reddit">
            <i class="fa fa-reddit-alien"></i>
        </a>
    </li>

    
    <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fcharly3pins.dev%2fes%2fblog%2faprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%25C3%25A1gina-web-f%25C3%25A1cilmente%2f&amp;title=Aprende%20a%20utilizar%20el%20paquete%20embed%20a%20Go%20construyendo%20una%20p%c3%a1gina%20web%20f%c3%a1cilmente" target="_blank" class="share-btn linkedin">
            <i class="fa fa-linkedin"></i>
        </a>
    </li>

    
    <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fcharly3pins.dev%2fes%2fblog%2faprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%25C3%25A1gina-web-f%25C3%25A1cilmente%2f&amp;description=Aprende%20a%20utilizar%20el%20paquete%20embed%20a%20Go%20construyendo%20una%20p%c3%a1gina%20web%20f%c3%a1cilmente" target="_blank" class="share-btn pinterest">
            <i class="fa fa-pinterest-p"></i>
        </a>
    </li>

    
    <li>
        <a href="mailto:?subject=Check out this post by charly3pins&amp;body=https%3a%2f%2fcharly3pins.dev%2fes%2fblog%2faprende-a-utilizar-el-paquete-embed-a-go-construyendo-una-p%25C3%25A1gina-web-f%25C3%25A1cilmente%2f" target="_blank" class="share-btn email">
            <i class="fa fa-envelope"></i>
        </a>
    </li>
</ul>


				<article>
					
					<div class="centered">
						<img src="https://charly3pins.dev/images/gopher-hiking.svg" alt="cover image">
					</div>
					
					
					<div>
						<p class="caption">Imagen de<a href="https://github.com/egonelbre/gophers/blob/master/vector/adventure/hiking.svg">Egon Elbre</a></p>
					</div>
					
					<div class="page-separator"></div>
					<p>Trabajar con ficheros estáticos nunca es tarea sencilla y menos en Go ya que no teníamos soporte nativo para ellos y teníamos que tirar de librerías de terceros. Con la release de <a href="https://blog.golang.org/go1.16">Go 1.16</a> esto cambió. Y cambió para bien, ya que incluye un nuevo paquete llamado <a href="https://pkg.go.dev/embed">embed</a> que de forma nativa nos ayuda a trabajar con los ficheros estáticos.</p>
<p>En la documentación oficial del paquete (link anterior) aparecen varios ejemplos de uso de dicha librería:</p>
<ul>
<li>incrustando un fichero como <code>string</code></li>
<li>incrustando un fichero como <code>[]byte</code></li>
<li>incrustando un fichero como el tipo propio de la librería <code>embed.FS</code></li>
</ul>
<p>Los dos primeros casos son muy simples y con los ejemplos de dicho artículo se entienden perfectamente. Por dar un poco más de ejemplos (sin código) os puedo decir que el caso de <code>string</code> podría ser válido cuando queremos cargar algún valor de configuración &ldquo;simple&rdquo; a partir de un fichero externo. En vez de tirar de una variable de entorno, podríamos tener un fichero de config con ese valor (no sensibles por supuesto) y cargar dicho fichero con la librería para incrustar ese valor.</p>
<p>Si quisiéramos hacer lo mismo pero con más de un valor (más de un <code>string</code>) tendríamos que usar el otro tipo, <code>[]byte</code>. De esta forma podríamos tener por ejemplo un <code>.yaml</code> (adoramos YAML ¿no?) con nuestra configuración para la aplicación e incrustarlo en nuestra aplicación como array de bytes y cargar todos los valores de golpe. Luego con hacer un custom type (un struct mismo) y hacerle unmarshall del <code>[]byte</code> a nuestro type nos serviría sin problemas.</p>
<p>El tercer tipo de dato para mí es el más interesante de comentar y por eso escribo este post. Si alguna vez has montado una página web, sabrás que se compone de varios ficheros&hellip; ¡ajá! estáticos. Para ello en Go tenemos el paquete <code>html/template</code> el cual necesita cargar en memoria las plantillas de las páginas que queremos montar.</p>
<p>Llegados a este punto te podrías preguntar, ¿por qué es tedioso trabajar con estáticos? o también ¿en qué momento es todo esto útil? Pues ahora mismo lo voy a explicar. Imagina que nuestro programa necesita leer un fichero, en el ejemplo anterior la plantilla html. Esta plantilla tendrá una ubicación, un directorio en el cual está almacenada. Esta ubicación será válida mientras nuestro código se compile en el directorio actual. En el momento que hagamos un <code>go build</code> y el binario lo movamos a otro destino, esa lectura nos va a fallar porqué no va a encontrar la ruta especificada. Para resolver este problema existe el paquete <code>embed</code>.</p>
<p>Vamos a ver un poco de código para este caso. Primero de todo miramos la <a href="https://pkg.go.dev/embed#FS">documentación</a> y vemos qué campos tiene el tipo que nos interesa <code>embed.FS</code> y qué métodos nos ofrece. Vemos que no hay campos pero sí tres métodos para abrir un fichero, leer un fichero y leer un directorio y que éstos devuelven un <code>fs.File</code>, un <code>[]byte</code> y un <code>[]fs.DirEntry</code> respectivamente además del clásico error cada uno.</p>
<p>Ya que queremos montar una web, vamos a ver el paquete anteriormente comentado qué métodos nos ofrece que estén relacionados con los tres tipos que podemos obtener del paquete <code>embed.FS</code>. Vemos que hay un método <a href="https://pkg.go.dev/html/template#ParseFS">ParseFS()</a> que parece el adecuado ya que recibe un <code>fs.FS</code> y un <code>string...</code> con los directorios de donde vamos a cargar dicho fichero.</p>
<p>Teniendo en cuenta que las plantillas las podemos tener simples o tirando de layouts, vamos a ver el caso más completo que es cuando usamos un layout para definir la pantalla que queremos pintar y ejecutar dicho layout en nuestras plantillas.</p>
<h2 id="ejemplo-construyendo-una-página-web">Ejemplo construyendo una página web</h2>
<p>Para hacer este ejemplo crearemos la siguiente estructure de carpetas y ficheros:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-vim" data-lang="vim"><span class="line"><span class="cl"><span class="p">|-</span> <span class="nx">templates</span>/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">|-</span> <span class="nx">templates</span>/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>	<span class="p">|-</span> <span class="nx">layouts</span>/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">|-</span> <span class="nx">main</span>.<span class="nx">go</span><span class="err">
</span></span></span></code></pre></div><p>Nuestra main layout podría ser algo parecido al siguiente bloque como <code>layout.html</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">define</span> <span class="s">&#34;main&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="p">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nx">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nx">title</span><span class="p">&gt;</span><span class="nx">Testing</span> <span class="nx">embed</span><span class="p">&lt;</span><span class="o">/</span><span class="nx">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nx">link</span> <span class="nx">href</span><span class="p">=</span><span class="s">&#34;//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&#34;</span> <span class="nx">rel</span><span class="p">=</span><span class="s">&#34;stylesheet&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="o">/</span><span class="nx">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nx">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;container-fluid&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="p">{{</span><span class="nx">template</span> <span class="s">&#34;content&#34;</span> <span class="p">.}}</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="o">/</span><span class="nx">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="o">/</span><span class="nx">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">end</span><span class="p">}}</span>
</span></span></code></pre></div><p>Obviamente esto se puede complicar tanto como desees y necesites. Para el ejemplo que quiero mostrar no hace falta complicarlo más.</p>
<p>La template podría ser la siguiente como <code>userProfile.html</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">template</span> <span class="s">&#34;main&#34;</span> <span class="p">.}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">define</span> <span class="s">&#34;content&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;dashboard jumbotron-fluid&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nx">h1</span><span class="p">&gt;</span><span class="nx">User</span><span class="p">&lt;</span><span class="o">/</span><span class="nx">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;row&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;col-sm-12&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-body&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">h5</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-title&#34;</span><span class="p">&gt;{{.</span><span class="nx">Name</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">h5</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">p</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-text&#34;</span><span class="p">&gt;</span><span class="nx">Email</span><span class="p">:</span> <span class="p">{{.</span><span class="nx">Email</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">p</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-text&#34;</span><span class="p">&gt;</span><span class="nx">Address</span><span class="p">:</span> <span class="p">{{.</span><span class="nx">Address</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">p</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-text&#34;</span><span class="p">&gt;</span><span class="nx">Phone</span> <span class="nx">number</span><span class="p">:</span> <span class="p">{{.</span><span class="nx">PhoneNumber</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">end</span><span class="p">}}</span>
</span></span></code></pre></div><p>Como veis es algo muy simple también para mostrar información de un usuario muy básico. Podría ser la página del perfil de un usuario.</p>
<p>Una vez tenemos tanto el layout como la template, tenemos que picar nuestro código en Go para cargar dichas información. Para ello creamos la función a continuación en nuestro <code>main.go</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;embed&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;html/template&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io/fs&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">layoutsDir</span>   <span class="p">=</span> <span class="s">&#34;templates/layouts&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">templatesDir</span> <span class="p">=</span> <span class="s">&#34;templates&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">extension</span>    <span class="p">=</span> <span class="s">&#34;/*.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//go:embed templates/* templates/layouts/*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">files</span>     <span class="nx">embed</span><span class="p">.</span><span class="nx">FS</span>
</span></span><span class="line"><span class="cl">	<span class="nx">templates</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">template</span><span class="p">.</span><span class="nx">Template</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">LoadTemplates</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">templates</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">templates</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">template</span><span class="p">.</span><span class="nx">Template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">tmplFiles</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">fs</span><span class="p">.</span><span class="nf">ReadDir</span><span class="p">(</span><span class="nx">files</span><span class="p">,</span> <span class="nx">templatesDir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">tmpl</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tmplFiles</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">tmpl</span><span class="p">.</span><span class="nf">IsDir</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">pt</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">template</span><span class="p">.</span><span class="nf">ParseFS</span><span class="p">(</span><span class="nx">files</span><span class="p">,</span> <span class="nx">templatesDir</span><span class="o">+</span><span class="s">&#34;/&#34;</span><span class="o">+</span><span class="nx">tmpl</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span> <span class="nx">layoutsDir</span><span class="o">+</span><span class="nx">extension</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">templates</span><span class="p">[</span><span class="nx">tmpl</span><span class="p">.</span><span class="nf">Name</span><span class="p">()]</span> <span class="p">=</span> <span class="nx">pt</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Lo interesante aquí es ver como definimos la parte de las variables:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//go:embed templates/* templates/layouts/*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">files</span>     <span class="nx">embed</span><span class="p">.</span><span class="nx">FS</span>
</span></span></code></pre></div><p>Con esto le indicamos al compilador que busque dentro de templates y de templates/layouts los archivos y los cargue en la variable <code>files</code>. Luego en nuestra función de cargar plantillas simplemente inicializamos un mapa donde guardamos el nombre de la plantilla y el valor de ésta. Tal como comenté antes, usamos el paquete <code>fs</code> para leer los ficheros cargados con el paquete <code>embed</code> y luego ya los podemos ejecutar con la función que vimos de <code>ParseFS</code>.</p>
<p>Ahora que ya tenemos nuestras plantillas cargadas es hora de exponerlas. Para ello levantaremos un server HTTP sencillito para que se vea como acceder a nuestras plantillas. Primero de todo creamos nuestro handler. El siguiente bloque puede estar en el mismo <code>main.go</code> o en un fichero diferente. Dependiendo del caso las llamadas a la función para renderizar las templates y a algunas variables deberán modificarse.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">userProfile</span> <span class="p">=</span> <span class="s">&#34;userProfile.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">UserProfile</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">t</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">templates</span><span class="p">[</span><span class="nx">userProfile</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;template %s not found&#34;</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">data</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;Name&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;John Doe&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;Email&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;johndoe@email.com&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;Address&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;Fake Street, 123&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;PhoneNumber&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;654123987&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Finalmente añadimos nuestra función <code>main()</code> en el fichero <code>main.go</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="o">:=</span> <span class="nf">LoadTemplates</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewServeMux</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">r</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/user-profile&#34;</span><span class="p">,</span> <span class="nx">UserProfile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="conclusión">Conclusión</h2>
<p>Con todo esto espero que trabajar con los ficheros estáticos te resulte mucho más sencillo y práctico que antes. Puede ver el código completo en <a href="https://github.com/charly3pins/go-embed-example">mi repositorio</a>.
Si hay alguna parte que no ha quedado del todo clara o hay partes que no he cubierto que te gustaría que lo hiciera, déjame un comentario aquí mismo o por mis redes sociales que tienes en mi perfil y estaré encantado de responder.</p>

				</article>

				
				
				<div class="page-separator"><hr></div>
				
				<section class="post-preview-container">
					<a href="https://charly3pins.dev/es/blog/automatice-el-readme-para-su-perfil-de-github-con-go-y-github-actions/">
						<div class="post-preview-title-container">
							<h3 class="post-preview-title">Automatice el README para su perfil de GitHub con Go y GitHub Actions</h3>
						</div>
						<div class="post-preview-subtext">Crear con la ayuda de Go un fichero Markdown dinámico por README y desplegarlo en GitHub de su perfil con la ayuda de GitHub Actions.</div>
						<div>
							<span class="post-preview-metadata">
								16/03/2021 · 5 min lectura
							</span>
							
							<a class="tag" href="https://charly3pins.dev/tags/go/">#go</a>
							
							<a class="tag" href="https://charly3pins.dev/tags/github/">#github</a>
							
							<a class="tag" href="https://charly3pins.dev/tags/ci/cd/">#ci/cd</a>
							
						</div>
					</a>
				</section>					
				
				<section class="post-preview-container">
					<a href="https://charly3pins.dev/es/blog/suba-de-nivel-sus-presentaciones-con-go/">
						<div class="post-preview-title-container">
							<h3 class="post-preview-title">Suba de nivel sus presentaciones con Go</h3>
						</div>
						<div class="post-preview-subtext">Genera fácilmente tus presentaciones con &#34;present&#34;, la herramienta impulsada por Go que genera y renderiza tus diapositivas.</div>
						<div>
							<span class="post-preview-metadata">
								06/10/2020 · 7 min lectura
							</span>
							
							<a class="tag" href="https://charly3pins.dev/tags/go/">#go</a>
							
							<a class="tag" href="https://charly3pins.dev/tags/life/">#life</a>
							
						</div>
					</a>
				</section>					
				
				<section class="post-preview-container">
					<a href="https://charly3pins.dev/es/code/tournaments-generator/">
						<div class="post-preview-title-container">
							<h3 class="post-preview-title">Tournaments generator</h3>
						</div>
						<div class="post-preview-subtext">Prueba de concepto de la construcción de una aplicación para administrar torneos FIFA 20 entre diferentes personas usando Flutter para construir una aplicación móvil y Go para construir una API que actúa como servidor. También usé Python para construir raspadores simples.</div>
						<div>
							<span class="post-preview-metadata">
								01/05/2020 · 9 min lectura
							</span>
							
							<a class="tag" href="https://charly3pins.dev/tags/go/">#go</a>
							
							<a class="tag" href="https://charly3pins.dev/tags/flutter/">#flutter</a>
							
							<a class="tag" href="https://charly3pins.dev/tags/python/">#python</a>
							
						</div>
					</a>
				</section>					
				
				
				
				<div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-charly3pins-dev" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
			
			</section>
			
			<div class="page-separator centered"><hr></div>
			
			<footer class="footer-container">
	<ul class="footer-social-icons-container">
		<li><a class="footer-social-icon" href="https://twitter.com/charly3pins" target="_blank" aria-label="Twitter">
			<i class="fa fa-twitter fa-fw" title="Twitter"></i></a>
		</li>
		<li><a class="footer-social-icon" href="https://github.com/charly3pins" target="_blank" aria-label="GitHub">
			<i class="fa fa-github-alt fa-fw" title="GitHub"></i></a>
		</li>
		<li><a class="footer-social-icon" href="https://stackoverflow.com/users/4948631/charly3pins" target="_blank" aria-label="Stack Overflow">
			<i class="fa fa-stack-overflow fa-fw" title="Stack Overflow"></i></a>
		</li>
		<li><a class="footer-social-icon" href="https://charly3pins.dev/index.xml" target="_blank" aria-label="RSS">
			<i class="fa fa-rss fa-fw" title="RSS"></i></a>
		</li>
		<li><a class="footer-social-icon" href="https://dev.to/charly3pins" target="_blank" aria-label="Dev.to">
			<i class="fa fa-dev-to" title="Dev.to"></i>DEV</a>
		</li> 
		<li><a class="footer-social-icon" href="mailto:hello@charly3pins.dev" target="_blank" aria-label="Email">
			<i class="fa fa-envelope fa-fw" title="email"></i></a>
		</li>
	</ul>
	<div class="footer-text">Última publicación en 16/08/2021</div>
	<div class="footer-text">© 2018 - 2023 Charly3Pins</div>
</footer>
<script type="text/javascript" src="https://charly3pins.dev/js/theme-switcher.js"></script>

		
		</div>

	</body>
</html>
