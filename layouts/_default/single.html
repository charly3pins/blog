{{ define "main" }}
  {{ $lastmodstr := (partial "date.html" (dict "date" .Lastmod "language" $.Page.Language "format" "long")) }}
  {{ $datestr := (partial "date.html" (dict "date" .Date "language" $.Page.Language "format" "long")) }}

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">{{ .Title }}</h1>
    <h2 class="text-xl">{{ .Description }}</h2>

    {{ if (and .Params.image (not (or .Site.Params.hidePageThumbnail .Params.hidePageThumbnail)) ) }}
    <div class="relative max-w-5xl mx-auto px-4">
      <img src="{{ .Params.image }}" class="rounded-lg shadow-sm w-full object-contain" />
      <div class="absolute top-4 right-8 rounded shadow bg-white text-gray-900 dark:bg-gray-900 dark:text-white px-2 py-0.5">
        {{ $datestr }}
      </div>
    </div>
    {{ end }}

    <h5 class="text-sm flex items-center flex-wrap">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" fill="#000000" height="16" width="16" viewBox="0 0 303.124 303.124" xml:space="preserve" transform="rotate(90)">
        <path d="M245.082,135.217L119.831,10.094C113.422,3.679,104.498,0,95.348,0c-0.28,0-0.56,0.003-0.849,0.01l-65.841,1.67 C13.789,2.1,1.88,14.051,1.546,28.884L0.009,94.625c-0.219,9.316,3.492,18.494,10.182,25.181l125.259,125.15 c6.59,6.585,15.331,10.211,24.609,10.211c0.001,0,0.001,0,0.001,0c9.157,0,17.754-3.56,24.206-10.021l60.841-60.879 C258.607,170.757,258.598,148.756,245.082,135.217z M236.619,175.785l-60.843,60.881c-4.186,4.193-9.768,6.502-15.716,6.502 c-6.076,0-11.804-2.379-16.128-6.7L18.674,111.317c-4.38-4.377-6.81-10.358-6.668-16.411l1.537-65.747 c0.19-8.443,6.978-15.244,15.436-15.483l65.816-1.67C94.98,12.002,95.163,12,95.348,12c5.99,0,11.819,2.396,15.998,6.579 L236.595,143.7C245.436,152.557,245.447,166.95,236.619,175.785z"/>
        <path d="M66.556,38.317c-7.595,0-14.732,2.955-20.104,8.326c-5.376,5.391-8.327,12.549-8.31,20.158 c0.018,7.579,2.983,14.69,8.337,20.008c5.366,5.368,12.499,8.324,20.085,8.324c7.587,0,14.72-2.957,20.076-8.318 c5.365-5.353,8.321-12.48,8.323-20.069c0.002-7.603-2.96-14.749-8.335-20.118C81.275,41.269,74.147,38.317,66.556,38.317z M78.158,78.326c-3.096,3.099-7.213,4.806-11.593,4.806c-4.381,0-8.5-1.708-11.614-4.822c-3.091-3.071-4.799-7.168-4.809-11.538 c-0.01-4.398,1.697-8.538,4.8-11.65c3.1-3.099,7.224-4.806,11.614-4.806c4.382,0,8.495,1.701,11.586,4.796 c3.11,3.105,4.822,7.236,4.821,11.629C82.962,71.122,81.258,75.233,78.158,78.326z"/>
      </svg>
      <span class="mr-1">Tags:</span>
      {{range .Params.tags}}
      <a class="mr-1" href="{{ "tags/" | absURL }}{{ . | urlize }}/">{{ . }} </a>
      {{end}}
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      {{ $datestr | i18n "postedOnDate" }}
      {{ if ne $datestr $lastmodstr }}
        &nbsp{{ $lastmodstr | i18n "lastModified" }}</h5><h5 class="text-sm flex items-center flex-wrap">
      {{ else }}
        &nbsp;&bull;&nbsp;
      {{ end }}
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
      {{ i18n "readingTime"}}{{ .ReadingTime }}&nbsp;{{ i18n "readTime" }}
        {{ if .IsTranslated -}}
          {{- $links := apply .Translations "partial" "translation_link.html" "." -}}
          {{- $cleanLinks := apply $links "chomp" "." -}}
          {{- $linksOutput := delimit $links (i18n "translationsSeparator") -}}
          &nbsp;&bull;&nbsp;{{ i18n "translationsLabel" }}&nbsp;{{ $linksOutput }}
        {{- end }}
    </h5>

    {{ if (or .Site.Params.toc .Params.toc) }}
    {{- partial "toc.html" . -}}
    {{ end }}

    {{ .Content }}
  </article>

  {{- partial "comments.html" . -}}

  {{- partial "social.html" . -}}
{{ end }}
